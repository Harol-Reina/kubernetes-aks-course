# =============================================================================
# QoS Class: BESTEFFORT
# =============================================================================
#
# Condiciones para BestEffort:
# - NINGÃšN contenedor tiene requests o limits para CPU o Memory
#
# CaracterÃ­sticas:
# - âš ï¸ Primera en ser evicted (menor prioridad)
# - ğŸ² Sin garantÃ­as de recursos
# - ğŸ’¸ Bajo costo (no reserva recursos)
# - ğŸ¯ Uso: Batch jobs no crÃ­ticos, testing
# =============================================================================

apiVersion: v1
kind: Pod
metadata:
  name: qos-besteffort
  labels:
    qos-class: besteffort
    example: qos-demo
  annotations:
    description: "QoS: BestEffort - sin resources"
    warning: "Primera en ser evicted bajo presiÃ³n de recursos"
spec:
  containers:
  - name: nginx
    image: nginx:1.25-alpine
    # âŒ Sin resources definidos
    ports:
    - containerPort: 80

# =============================================================================
# ORDEN DE EVICTION
# =============================================================================
#
# Cuando un nodo tiene presiÃ³n de recursos, Kubernetes evicted Pods en este orden:
#
# 1. BestEffort  â—„â”€â”€ Se eliminan PRIMERO (este Pod)
#    â””â”€ Sin requests/limits
#    â””â”€ Menor prioridad
#
# 2. Burstable
#    â””â”€ Con requests < limits
#    â””â”€ Prioridad media
#
# 3. Guaranteed  â—„â”€â”€ Se eliminan ÃšLTIMO
#    â””â”€ request == limit
#    â””â”€ MÃ¡xima protecciÃ³n
#
# =============================================================================
# CASOS DE USO VÃLIDOS PARA BESTEFFORT
# =============================================================================
#
# âœ… Batch jobs no crÃ­ticos
# âœ… Procesamiento que puede reiniciar sin problema
# âœ… Development/testing environments
# âœ… Jobs que solo se ejecutan cuando hay recursos idle
#
# âŒ NO usar en:
# âŒ Aplicaciones de producciÃ³n crÃ­ticas
# âŒ Bases de datos
# âŒ APIs que necesitan baja latencia
#
# =============================================================================
# COMANDOS ÃšTILES
# =============================================================================
#
# Aplicar:
# kubectl apply -f pod.yaml
#
# Verificar QoS Class:
# kubectl get pod qos-besteffort -o jsonpath='{.status.qosClass}'
# Output: BestEffort
#
# Ver que no tiene resources:
# kubectl describe pod qos-besteffort | grep -A 10 "Requests:"
# Output: (vacÃ­o)
#
# Simular presiÃ³n de recursos y ver eviction:
# (crear muchos Pods con requests altos hasta llenar el nodo)
# kubectl get events | grep -i evict
#
# Limpiar:
# kubectl delete -f pod.yaml
